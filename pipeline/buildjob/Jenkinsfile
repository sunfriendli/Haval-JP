#!/usr/bin/env groovy

pipeline {
    agent any

    parameters {
        choice(name: 'BUILD_JOB_FILE',
        choices: getBuildJobFileChoices(),
        description: 'The name of build job.')
    }
    environment {
        GAME_BUILD_SCRIPT_DIR = "${env.WORKSPACE}/pipeline/buildjob"
    }

    stages {
        stage('Find Latest Ubuntu') {
            steps {
                script {
                    dir (GAME_BUILD_SCRIPT_DIR) {
                        def map = [:]
                        map['source_ami'] = '456123789'
                        map['source_ami_release'] = '20180926'

                        triggerJob file: params.BUILD_JOB_FILE, paramMap: map
                    }
                }
            }
        }
    }
}